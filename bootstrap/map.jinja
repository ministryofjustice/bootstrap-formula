{% set bootstrap = salt['grains.filter_by']({

    'Ubuntu-12.04': {
       'upgrade_grub': True,
       'grub_install_device': '/dev/' + (salt['grains.get']('SSDs:0') or 'sda'),
       'kernel': {
         'meta_package': 'linux-image-generic-lts-trusty',
         'version': '3.13.0.57.49'
       }
    },

    'Ubuntu-14.04': {
       'upgrade_grub': True,
       'grub_install_device': '/dev/' + (salt['grains.get']('SSDs:0') or 'sda'),
       'kernel': {
         'meta_package': 'linux-image-generic',
         'version': '3.13.0.57.64'
       }
    },

    'Unknown': {
       'upgrade_grub': False,
       'kernel': {
         'version': None
       }
    }

}, grain='osfinger', merge=salt['pillar.get']('bootstrap',{}), default='Unknown') %}

